(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[212],{1326:function(t,e,i){},1327:function(t,e,i){},1328:function(t,e,i){},1329:function(t,e,i){},1629:function(t,e,i){"use strict";i(1326)},1630:function(t,e,i){"use strict";i(1327)},1631:function(t,e,i){"use strict";i(1328)},1632:function(t,e,i){"use strict";i(1329)},1758:function(t,e,i){"use strict";i.r(e);var o=i(22),n=i(0),s=i(474),r=i(1270),c=i(1086),d=i(320),a=i(31),l=i(1158),p=i.n(l),u=i(311),h=i(95),b=i(1078),g=i(544),m=i(27),f=i(39),y=i(532),S=i(1124),O=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},v=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let w=class extends n.j{constructor(){super(...arguments),this.OzTextButtonColorScheme=f.OzTextButtonColorScheme,this.maxLength=512,this.isSaveButtonDisabled=!1}get tailwindFontClass(){return Object(g.a)(this.fontId)}get sectionTitle(){return this.section.title}get isBeingEdited(){return this.sectionBeingEditedId&&this.sectionBeingEditedId===this.section.id&&!this.isWallOnboardingFlow}get wallSectionsLength(){return this.sections.length}get isEmptyState(){return this.isBeingEdited&&1===this.wallSectionsLength}get titlePlaceholder(){return this.isEmptyState?this.__("Name your first section"):this.__("Name your section")}handleIsBeingEdited(t){t&&(this.isSaveButtonDisabled=!1,this.$nextTick(()=>{this.$refs.title.focus()}))}mounted(){this.isBeingEdited&&this.$nextTick(()=>{this.$refs.title.focus()})}saveTitle(){const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");if(t.length>0)this.isSaveButtonDisabled=!0,this.changeSectionTitle({sectionId:this.section.id,title:t});else{const t=this.__("Section title cannot be empty.");this.setSnackbar({message:t})}}tryStartEditing(){this.canIEdit&&!this.isBeingEdited&&this.startEditingSection({sectionId:this.section.id})}deleteSection(){this.$emit("delete")}onOutsideClick(){if(!this.isBeingEdited)return;const t=this.$refs.title.$el.value.replace(/\n|\r/g,"");t.length>0?this.changeSectionTitle({sectionId:this.section.id,title:t}):this.stopEditingSection()}};O([Object(n.h)(),v("design:type",Object)],w.prototype,"section",void 0),O([Object(n.h)(),v("design:type",Object)],w.prototype,"sectionBeingEditedId",void 0),O([n.i,v("design:type",Boolean)],w.prototype,"isWallOnboardingFlow",void 0),O([n.i,v("design:type",Boolean)],w.prototype,"isIOS",void 0),O([Object(n.m)("section").Getter,v("design:type",Array)],w.prototype,"sections",void 0),O([n.d,v("design:type",Boolean)],w.prototype,"canIModerate",void 0),O([n.d,v("design:type",Boolean)],w.prototype,"canIEdit",void 0),O([n.d,v("design:type",String)],w.prototype,"colorScheme",void 0),O([n.d,v("design:type",Number)],w.prototype,"fontId",void 0),O([n.d,v("design:type",String)],w.prototype,"dir",void 0),O([n.d,v("design:type",Boolean)],w.prototype,"isUsingNewSurfaceShadows",void 0),O([Object(n.k)("isBeingEdited"),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],w.prototype,"handleIsBeingEdited",null),O([Object(n.m)("section").Action,v("design:type",Function)],w.prototype,"changeSectionTitle",void 0),O([Object(n.m)("section").Action,v("design:type",Function)],w.prototype,"stopEditingSection",void 0),O([Object(n.m)("section").Action,v("design:type",Function)],w.prototype,"startEditingSection",void 0),O([Object(n.m)("section").Action,v("design:type",Function)],w.prototype,"showSectionActionMenu",void 0),O([Object(n.m)("snackbars").Action,v("design:type",Function)],w.prototype,"setSnackbar",void 0),w=O([Object(n.b)({components:{MultilineInput:y.default,OzTextButton:f.default,OzIcon:m.default},mixins:[S.a]})],w);var x=w,_=i(3),j=Object(_.a)(x,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("header",{class:["surface-section-title-new","relative","rounded-xl","text-20","break-words",{"bg-dark-ui-100 text-light-text-100":"dark"===t.colorScheme,"bg-light-ui-100 text-dark-text-100":"light"===t.colorScheme},"font-semibold","mb-4","w-[254px]",t.tailwindFontClass,t.isUsingNewSurfaceShadows&&"shadow-elevation-1"],attrs:{"data-view-mode":t.isBeingEdited?"edit":"show"},on:{dblclick:t.tryStartEditing}},[e("div",{staticClass:"ltr:pl-3 rtl:pr-3 ltr:pr-4 rtl:pl-4 py-2"},[t.isBeingEdited?t._e():e("hgroup",[e("h2",{attrs:{dir:"auto","data-cy":"sectionTitle"}},[t._v(t._s(t.sectionTitle))])]),t._v(" "),t.isBeingEdited?e("hgroup",[e("multiline-input",{ref:"title",class:[t.tailwindFontClass,"text-20",{"bg-dark-ui-100 text-light-text-100 placeholder-light-text-200":"dark"===t.colorScheme,"bg-light-ui-100 text-dark-text-100 placeholder-dark-text-200":"light"===t.colorScheme},,"font-semibold","m-0"],attrs:{dir:"auto",value:t.sectionTitle,maxlength:t.maxLength,placeholder:t.titlePlaceholder,required:""},on:{enter:t.saveTitle,escape:t.stopEditingSection},nativeOn:{paste:function(t){t.stopPropagation()}}})],1):t._e()]),t._v(" "),t.isBeingEdited?e("div",{staticClass:"flex w-full justify-end h-8"},[t.isEmptyState?t._e():e("OzTextButton",{class:["font-semibold","text-14","me-4"],attrs:{"color-scheme":t.OzTextButtonColorScheme.Secondary,"dark-mode":"dark"===t.colorScheme,text:t.__("Cancel")},on:{click:t.stopEditingSection}}),t._v(" "),e("OzTextButton",{class:["font-semibold","text-14","me-4"],attrs:{"dark-mode":"dark"===t.colorScheme,text:t.__("Save"),disabled:t.isSaveButtonDisabled},on:{click:t.saveTitle}})],1):t._e(),t._v(" "),t.canIModerate&&!t.isBeingEdited?e("OzTextButton",{class:["absolute","leading-none","p-0","w-[32px]","h-[32px]","-end-1.25","top-[-2px]"],attrs:{"data-cy":"sectionAction","color-scheme":t.OzTextButtonColorScheme.SecondaryMuted,"dark-mode":"dark"===t.colorScheme,"aria-label":t.__("Open section actions menu"),title:t.__("Section actions")},on:{click:function(e){return t.showSectionActionMenu({sectionId:t.section.id})}}},[e("OzIcon",{attrs:{name:"more_vertical",size:16}})],1):t._e()],1)}),[],!1,null,null,null).exports,I=i(12),P=i(1183),B=i(48);function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?k(Object(i),!0).forEach((function(e){T(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function T(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var E={data:()=>({$_sectionSortMixin_initialized:!1,$_sectionSortMixin_savePostHandler:null}),beforeDestroy(){this.$_sectionSortMixin_destroySortable()},methods:C(C({},Object(B.b)(["changeDragging"])),{},{initializeSectionSort(t){this.$_sectionSortMixin_makeSortable(),this.$_sectionSortMixin_savePostHandler=t,t||Object(I.c)("Using SectionSortMixin without declaring a handler function to save post."),this.$_sectionSortMixin_initialized=!0},destroySectionSort(){this.$_sectionSortMixin_destroySortable(),this.$_sectionSortMixin_savePostHandler=null,this.$_sectionSortMixin_initialized=!1},$_sectionSortMixin_clipItems(t,e,i){let o,n,s=i.height(),r=i.width();if(s>144){let t=e.offsetY+(e.originalEvent.target.getBoundingClientRect().top-i[0].getBoundingClientRect().top);if(t>144){s-t<144?(n=s-144,o=s):(n=t-72,o=n+144),i.data("clipTop",n)}else n=0,o=144;i.css("clip",`rect(${n-20}px, ${r+30}px, ${o+40}px, -20px)`)}t.addClass("ui-sortable-clipped")},$_sectionSortMixin_unclipItems(t,e,i){let o=document.getElementById("wall-container"),n=i[0].offsetTop;t.removeClass("ui-sortable-clipped");let s=null!=i.data("clipTop")?i.data("clipTop"):0,r=null!=i.data("scrollTop")?i.data("scrollTop"):0,c=i[0].offsetTop-n;o.scrollTop=r+c+s,i.removeData("clipTop"),i.removeData("scrollTop")},$_sectionSortMixin_saveScrollPosition(t,e,i){let o=document.getElementById("wall-container");i.data("scrollTop",o.scrollTop)},$_sectionSortMixin_markItemAsTransiting(t){t.addClass("noclick in-transit")},$_sectionSortMixin_unmarkItemAsTransiting(t){t.removeClass("noclick in-transit")},$_sectionSortMixin_savePost(t){let e=t.sectionId,i=t.sortIndex,o=t.postCid;t.previousCid,t.nextCid;this.$_sectionSortMixin_savePostHandler?this.$_sectionSortMixin_savePostHandler({sectionId:e,postCid:o,sortIndex:i}):Object(I.a)(new Error("No handler to save post for SectionSortMixin."))},$_sectionSortMixin_makeSortable(){let t=Object(P.a)(this.$el).find(".section-posts");t.sortable("instance")||t.sortable({connectWith:".surface-section .section-posts",cursor:"move",items:"> .wish-editable:not(#wish-new)",scrollSensitivity:48,cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, button, textarea, select, option",start:(e,i)=>{Object(P.a)(this.$el).parent().addClass("ui-sortable-sorting"),t.addClass("ui-sortable-sorting"),this.$_sectionSortMixin_clipItems(t,e,i.item),t.sortable("refreshPositions"),this.$_sectionSortMixin_markItemAsTransiting(i.item),this.changeDragging({isAPostDragging:!0})},beforeStop:(e,i)=>{this.$_sectionSortMixin_saveScrollPosition(t,e,i.item)},stop:(e,i)=>{Object(P.a)(this.$el).parent().removeClass("ui-sortable-sorting"),t.removeClass("ui-sortable-sorting"),"stream"!==this.$_sectionSortMixin_format&&"shelf"!==this.$_sectionSortMixin_format||this.$_sectionSortMixin_unclipItems(t,e,i.item),this.$_sectionSortMixin_unmarkItemAsTransiting(i.item),this.changeDragging({isAPostDragging:!1})},over:(t,e)=>{e.item.data("newSectionId",this.currentSectionId)},change:(t,e)=>{e.item.removeData("prevWishId nextWishId previousCid nextCid");let i=e.placeholder;e.item.data({prevWishId:i.prev(".wish").attr("id"),nextWishId:i.next(".wish").attr("id"),previousCid:i.next(".wish").data("postCid"),nextCid:i.prev(".wish").data("postCid")})},remove:(e,i)=>{i.placeholder.remove(),t.sortable("cancel")},update:(t,e)=>{var i;e.item.data("newSectionId")===this.currentSectionId&&((i={}).sectionId=this.currentSectionId,i.prevId=e.item.data("prevWishId"),i.nextId=e.item.data("nextWishId"),i.prevId||(i.prevId=null),i.nextId||(i.nextId=null),Object(u.a)(e.item,i),e.item.removeData("newSectionId prevWishId nextWishId previousCid nextCid"))}})},$_sectionSortMixin_destroySortable(){let t=Object(P.a)(this.$el).off(".sort").sortable("instance");t&&t.destroy()}})},$=i(68);function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function M(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(Object(i),!0).forEach((function(e){D(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function D(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var N={components:{BaseIcon:h.a,SurfacePost:b.a,SurfaceSectionTitleNew:j},mixins:[E],props:{section:{type:Object,default:()=>({})},reactionIdsByPostId:{type:Object,default:()=>({})},commentIdsByPostId:{type:Object,default:()=>({})}},data:()=>({difference:[],isAnimationPermitted:!1}),computed:M(M(M(M(M(M(M(M(M({},Object(B.e)(["inlinePostEdit","isFirefox","isSafari"])),Object(B.c)("post",["postBeingEditedCid","postEntitiesByCid","postCidsBySection","postOrder"])),Object(B.c)("postFilter",["filter"])),Object(B.e)("section",["sectionEntities","sectionBeingEditedId"])),Object(B.c)("section",{wallSections:"sections"})),Object(B.c)({colorScheme:"colorScheme",backgroundLuminance:"backgroundLuminance",canReorder:"canIModerate"})),Object(B.c)(["canIModerate","newPostLocation","isPostable","isUsingNewSurfaceShadows"])),Object(B.c)("nativeApp",["shelfSectionBottomPaddingPx"])),{},{sectionDomId(){return Object(s.b)(this.currentSectionId)},wallSectionsLength(){return this.wallSections.length},currentSectionId(){return 0===this.wallSectionsLength?this.sectionBeingEditedId:this.section.id},currentSection(){return this.sectionEntities[this.currentSectionId]},sortIndex(){return this.currentSection.sort_index},sectionColor(){return this.currentSection.color},postCidsInCurrentSection(){return this.postCidsBySection[this.currentSectionId]||[]},sortedSectionPosts(){const t=this.postCidsInCurrentSection.map(t=>this.postEntitiesByCid[t]).filter(t=>Object($.e)(t,this.filter));if(!this.inlinePostEdit){const e=t.filter(t=>t.id||!!t.body||!!t.subject||!!t.attachment);return Object(u.h)(e)}return Object(u.h)(t)},canAddPost(){return this.isPostable&&(!this.sectionBeingEditedId||this.section.id!==this.sectionBeingEditedId)},shouldShowButtonAtTop(){return this.canAddPost&&"top"===this.newPostLocation},shouldShowButtonAtBottom(){return this.canAddPost&&"bottom"===this.newPostLocation}}),watch:{sortedSectionPosts(t,e){const i=p()(e,t);this.difference=i.filter(t=>{const e=document.querySelector("#wish-"+t.id);return!!e&&Object(a.e)(e)})},newPostLocation(t,e){t!==e&&this.isPostable&&this.$nextTick(()=>{this.destroySectionSort(),this.initializeSectionSort(t=>{let e=t.postCid,i=t.sortIndex,o=t.sectionId;this.sortedPost({postCid:e,sortIndex:i,sectionId:o})})})},filter(){this.isAnimationPermitted=!0}},mounted(){this.isPostable&&this.initializeSectionSort(t=>{let e=t.postCid,i=t.sortIndex,o=t.sectionId;this.sortedPost({postCid:e,sortIndex:i,sectionId:o})})},methods:M(M(M({},Object(B.b)("post",["sortedPost"])),Object(B.b)("section",["deleteSection"])),{},{confirmDeleteSection(){window.confirm(this.__("Are you sure you want to delete this section and all its posts? This cannot be undone!"))&&this.deleteSection({sectionId:this.currentSectionId})},startNewPost(){this.$store.dispatch("post/startNewPost",{attributes:{wall_section_id:this.section.id}})},endAnimationForFilterChanged(){setTimeout(()=>{this.isAnimationPermitted=!1},100)},setHeight(t){t.style.height=t.getBoundingClientRect().height+"px"},staggerWishLeave(t){const e=this.difference.findIndex(e=>e.cid===t.dataset.cid),i=300/(this.difference.length-1)*Math.max(e,0);this.isAnimationPermitted?(t.style.transition=Object(a.f)(t)?"all 500ms cubic-bezier(0,0,0.2,1)":e<0?"none":1===this.difference.length?"all 500ms cubic-bezier(0,0,0.2,1)":"all 200ms cubic-bezier(0,0,0.2,1)",t.style.opacity="1",setTimeout(()=>{t.style.height="0px",t.style.margin="0px",t.style.opacity="0"},i)):(t.style.height="0px",t.style.margin="0px",t.style.opacity="0")}})};i(1629),i(1630);function F(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function L(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?F(Object(i),!0).forEach((function(e){z(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):F(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function z(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var R,H,W={components:{SurfaceSection:Object(_.a)(N,(function(){var t=this,e=t._self._c;return e("section",{class:["surface-section","relative",{"section-sortable":t.canReorder}],style:{paddingBottom:t.shelfSectionBottomPaddingPx+"px"},attrs:{id:t.sectionDomId,"data-rank":t.sortIndex,"data-section-id":t.currentSectionId,"data-color":t.sectionColor}},[e("SurfaceSectionTitleNew",{attrs:{section:t.currentSection,"section-being-edited-id":t.sectionBeingEditedId},on:{delete:t.confirmDeleteSection}}),t._v(" "),t.shouldShowButtonAtTop?e("button",{class:{"w-[254px]":!0,"flex-shrink-0 w-full border-none rounded-xl mb-4 h-8 transition":!0,"bg-common-ui-d70 text-light-text-200 hover:bg-dark-ui-200 ":"dark"===t.colorScheme,"bg-common-ui-l80 text-dark-text-200 hover:bg-light-ui-200 ":"light"===t.colorScheme,"shadow-elevation-1":t.isUsingNewSurfaceShadows},attrs:{title:t.__("Add post to this section"),"aria-label":t.__("Add post to this section")},on:{click:function(e){return e.preventDefault(),t.startNewPost.apply(null,arguments)}}},[e("base-icon",{staticClass:"add-icon",attrs:{name:"add"}})],1):t._e(),t._v(" "),e("transition-group",{ref:"postsList",class:["section-posts","pb-px -mb-px",t.isFirefox||t.isSafari?"pe-4.25 ps-1 -ms-1":"me-4 ps-1 -ms-1 pe-px",{"scrollbar-photo":"light"===t.backgroundLuminance},{"scrollbar-photo-dark":"dark"===t.backgroundLuminance},t.isAnimationPermitted?"allows-transition":""],attrs:{tag:"div","data-section-id":t.currentSectionId,"enter-active-class":t.isAnimationPermitted?"wish-enter":"",duration:t.isAnimationPermitted?650:0},on:{"before-leave":function(e){t.isAnimationPermitted&&t.setHeight(e)},leave:function(e){return t.staggerWishLeave(e)},"after-enter":t.endAnimationForFilterChanged,"after-leave":t.endAnimationForFilterChanged}},t._l(t.sortedSectionPosts,(function(i,o){return e("surface-post",{key:i.cid,attrs:{"data-cid":i.cid,index:o,post:i,"post-reaction-ids":t.reactionIdsByPostId[i.id],"post-comment-ids":t.commentIdsByPostId[i.id],edit:t.inlinePostEdit,"is-last":o===t.sortedSectionPosts.length-1}})})),1),t._v(" "),t.shouldShowButtonAtBottom?e("div",{staticClass:"add-post w-[254px] m-0",attrs:{title:t.__("Add post to this section"),"aria-label":t.__("Add post to this section")},on:{click:function(e){return e.preventDefault(),t.startNewPost.apply(null,arguments)}}},[e("button",{class:[{"flex-shrink-0 border-none rounded-full w-8 h-8 transition":!0,"bg-common-ui-d70 text-light-text-200 hover:bg-dark-ui-100 ":"dark"===t.colorScheme,"bg-common-ui-l80 text-dark-text-200 hover:bg-light-ui-100 ":"light"===t.colorScheme},t.isUsingNewSurfaceShadows&&"shadow-elevation-1"]},[e("base-icon",{staticClass:"add-icon",attrs:{name:"add"}})],1)]):t._e()],1)}),[],!1,null,null,null).exports},mixins:[{data:()=>({$_sectionsOrderSortMixin_initialized:!1}),updated(){this.$_sectionsOrderSortMixin_initialized?this.$_sectionsOrderSortMixin_makeSortable():this.$_sectionsOrderSortMixin_destroySortable()},beforeDestroy(){this.$_sectionsOrderSortMixin_destroySortable()},methods:{initializeSectionsOrderSort(){this.$_sectionsOrderSortMixin_initialized=!0},$_sectionsOrderSortMixin_markItemAsTransiting(t){t.addClass("noclick in-transit")},$_sectionsOrderSortMixin_unmarkItemAsTransiting(t){t.removeClass("noclick in-transit")},$_sectionsOrderSortMixin_makeSortable(){let t=Object(P.a)(this.$el);t.sortable("instance")||t.sortable({axis:"x",cursor:"move",handle:".surface-section-title-new",items:"> .surface-section.section-sortable",scrollSensitivity:48,cancel:"[contenteditable], .ui-resizable-handle, object, embed, input, button, textarea",start:(t,e)=>{null==e.item.data("section-id")&&this.update(),this.$_sectionsOrderSortMixin_markItemAsTransiting(e.item)},stop:(t,e)=>{this.$_sectionsOrderSortMixin_unmarkItemAsTransiting(e.item)},update:(t,e)=>{this.sortedSection(d.a.getNewIndex(e.item))}})},$_sectionsOrderSortMixin_destroySortable:function(){let t=Object(P.a)(this.$el).off(".sort").sortable("instance");t&&t.destroy()}}}],props:{reactionIdsByPostId:{type:Object,default:()=>({})},commentIdsByPostId:{type:Object,default:()=>({})}},computed:L(L(L(L(L(L({},Object(B.e)(["wall","isIOS"])),Object(B.e)("section",["sectionsFetched","sectionBeingEditedId"])),Object(B.c)("section",["sortedSections"])),Object(B.c)(["canIModerate","isAPanelVisible","dir"])),Object(B.c)("browser",["windowHeight"])),{},{isEmptyState(){return 0===this.sortedSections.length||1===this.sortedSections.length&&!!this.sectionBeingEditedId&&this.sectionBeingEditedId===this.sortedSections[0].id},canAddSection(){return this.canIModerate&&!this.isEmptyState},isNewSectionBeingAdded(){return String(this.sectionBeingEditedId).startsWith("new_")}}),watch:{isAPanelVisible:"addSectionIfNone",windowHeight:"setMaxHeight"},beforeMount(){this.addSectionIfNone()},mounted(){this.initializeSectionsOrderSort(),this.setMaxHeight()},updated(){this.addSectionIfNone()},methods:L(L({},Object(B.b)("section",["sortedSection","startNewSection","startWithNoSections"])),{},{addSectionIfNone(){0===this.sortedSections.length&&this.sectionsFetched&&!this.isAPanelVisible&&this.startWithNoSections()},newSection:()=>({sort_index:d.a.getBottomSortIndex()}),addSection(){this.startNewSection({section:this.newSection()})},setMaxHeight(){if(this.isIOS&&navigator.userAgent.toLowerCase().includes("14_4")){const t=document.getElementById("wish-list").offsetHeight;this.$el.style=`max-height: ${t}px;`}}})},G=(i(1631),Object(_.a)(W,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"surface-sections",attrs:{dir:t.dir}},[t._l(t.sortedSections,(function(i){return e("surface-section",{key:i.id,attrs:{id:"section-"+i.id,section:i,"reaction-ids-by-post-id":t.reactionIdsByPostId,"comment-ids-by-post-id":t.commentIdsByPostId}})})),t._v(" "),e("div",{staticClass:"add-section-frame"},[t.canAddSection&&!t.isNewSectionBeingAdded?e("button",{staticClass:"flat-button muted-button add-section",on:{click:t.addSection}},[t._v("\n      "+t._s(t.__("Add section"))+"\n    ")]):t._e()])],2)}),[],!1,null,null,null).exports),U=i(1137),V=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},q=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};const J=Object(n.m)("post"),Y=Object(n.m)("section"),K=Object(n.m)("composerModal"),Q=Object(n.m)("draft"),X=Object(n.m)("postAction"),Z=Object(n.m)("attachment"),tt=Object(n.m)("onboarding");let et=class extends n.j{mounted(){this.$nextTick(()=>this.toggleNewPostHandlers(this.isPostable))}beforeDestroy(){this.disableNewPostHandlers()}enableNewPostHandlers(){this.enableDropToPost(this.$el)}disableNewPostHandlers(){this.disableDropToPost(this.$el)}get xSections(){return Object(o.a)("surfaceSettingsV2")||!this.isWallOnboardingFlow&&!this.isFirstView}toggleNewPostHandlers(t){t?this.enableNewPostHandlers():this.disableNewPostHandlers()}scrollWallToSection(t){const e=this.postEntitiesByCid[t].wall_section_id;Object(s.a)(e)}scrollDownToPostAfterCopyOrTransfer(){var t;if(null===this.copyOrTransferPostResult&&"bottom"===this.newPostLocation&&this.copyOrTransferSectionId){const e="section-".concat(this.copyOrTransferSectionId.toString()),i=null===(t=document.getElementById(e))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(r.b)(i)}}scrollDownToNewPost(){var t;if("bottom"===this.newPostLocation&&this.mostRecentlyTouchedSectionId){const e="section-".concat(this.mostRecentlyTouchedSectionId.toString()),i=null===(t=document.getElementById(e))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(r.b)(i)}}scrollDownAfterPreviewImageLoaded(){var t;const e=this.mostRecentlyTouchedSectionId||this.copyOrTransferSectionId;if(e&&this.newestPost&&e==this.newestPost.wall_section_id&&"bottom"===this.newPostLocation){const i="section-".concat(e.toString()),o=null===(t=document.getElementById(i))||void 0===t?void 0:t.getElementsByClassName("section-posts")[0];Object(r.b)(o)}}};V([Object(n.h)({default:()=>{}}),q("design:type","function"===typeof(R="undefined"!==typeof Record&&Record)?R:Object)],et.prototype,"reactionIdsByPostId",void 0),V([Object(n.h)({default:()=>{}}),q("design:type","function"===typeof(H="undefined"!==typeof Record&&Record)?H:Object)],et.prototype,"commentIdsByPostId",void 0),V([n.i,q("design:type",Object)],et.prototype,"xHeader",void 0),V([n.d,q("design:type",Object)],et.prototype,"newPostLocation",void 0),V([J.Getter,q("design:type",Object)],et.prototype,"newestPostCid",void 0),V([J.Getter,q("design:type",Object)],et.prototype,"postEntitiesByCid",void 0),V([J.Getter,q("design:type",Object)],et.prototype,"newestPost",void 0),V([J.Getter,q("design:type",Object)],et.prototype,"mostRecentlyTouchedSectionId",void 0),V([X.Getter,q("design:type",Object)],et.prototype,"copyOrTransferSectionId",void 0),V([X.Getter,q("design:type",Object)],et.prototype,"copyOrTransferPostResult",void 0),V([Z.Getter,q("design:type",Object)],et.prototype,"surfacePreviewImageLoaded",void 0),V([tt.Getter,q("design:type",Object)],et.prototype,"isWallOnboardingFlow",void 0),V([tt.Getter,q("design:type",Object)],et.prototype,"isFirstView",void 0),V([J.Action,q("design:type",Object)],et.prototype,"createPost",void 0),V([Y.Action,q("design:type",Object)],et.prototype,"startEditingSection",void 0),V([Y.Action,q("design:type",Object)],et.prototype,"deleteSection",void 0),V([n.d,q("design:type",Object)],et.prototype,"isPostable",void 0),V([n.d,q("design:type",String)],et.prototype,"dir",void 0),V([n.d,q("design:type",String)],et.prototype,"backgroundLuminance",void 0),V([Q.Action,q("design:type",Function)],et.prototype,"startNewDraft",void 0),V([K.Action("dock"),q("design:type",Function)],et.prototype,"dockComposerModal",void 0),V([Object(n.k)("isPostable"),q("design:type",Function),q("design:paramtypes",[Object]),q("design:returntype",void 0)],et.prototype,"toggleNewPostHandlers",null),V([Object(n.k)("newestPostCid"),q("design:type",Function),q("design:paramtypes",[Object]),q("design:returntype",void 0)],et.prototype,"scrollWallToSection",null),V([Object(n.k)("copyOrTransferPostResult"),q("design:type",Function),q("design:paramtypes",[]),q("design:returntype",void 0)],et.prototype,"scrollDownToPostAfterCopyOrTransfer",null),V([Object(n.k)("newestPost"),q("design:type",Function),q("design:paramtypes",[]),q("design:returntype",void 0)],et.prototype,"scrollDownToNewPost",null),V([Object(n.k)("surfacePreviewImageLoaded"),q("design:type",Function),q("design:paramtypes",[]),q("design:returntype",void 0)],et.prototype,"scrollDownAfterPreviewImageLoaded",null),et=V([Object(n.b)({components:{SurfaceHeader:c.a,SurfaceSections:G},mixins:[U.a]})],et);var it=et,ot=(i(1632),Object(_.a)(it,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"wall-container"}},[t.xHeader?e("SurfaceHeader",{ref:"surfaceHeader"}):t._e(),t._v(" "),e("div",{ref:"wishList",class:["wish-list","overflow-y-hidden","background-luminance-"+t.backgroundLuminance,{"scrollbar-photo":"light"===t.backgroundLuminance,"scrollbar-photo-dark":"dark"===t.backgroundLuminance}],attrs:{id:"wish-list",dir:t.dir}},[t.xSections?e("surface-sections",{attrs:{"reaction-ids-by-post-id":t.reactionIdsByPostId,"comment-ids-by-post-id":t.commentIdsByPostId}}):t._e()],1),t._v(" "),e("div",{staticClass:"wish-sizer"}),t._v(" "),e("div",{staticClass:"gutter-sizer"})],1)}),[],!1,null,null,null));e.default=ot.exports}}]);
//# sourceMappingURL=212-946f91067f76283a45ea.chunk.js.map