(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[314],{1868:function(e,t,a){"use strict";a.r(t);var o=a(6),c=a(2),n=a(280),i=a(19),l=a(98),s=a(540),u=a(319),r=Object(o.defineComponent)({__name:"SurfacePostReaction",props:{post:null,isReacting:{type:Boolean},currentUserId:null,reactionData:null,colorScheme:null,usageContext:null},setup(e){const t=e,r=Object(o.defineAsyncComponent)(()=>a.e(316).then(a.bind(null,1869))),d=Object(o.defineAsyncComponent)(()=>a.e(318).then(a.bind(null,1870))),f=Object(o.defineAsyncComponent)(()=>a.e(315).then(a.bind(null,1871))),p=Object(o.defineAsyncComponent)(()=>a.e(317).then(a.bind(null,1872))),{createReaction:R,deleteReaction:m,updateReaction:v,startEditingReaction:h}=Object(u.a)(),{accumulatedReactionsByWishId:b,originalReactionData:k,currentReactionData:y}=Object(i.f)(Object(u.a)()),g=Object(o.computed)(()=>t.reactionData.type),O=Object(o.computed)(()=>{var e;return null==b.value[t.post.id]||(null===(e=b.value[t.post.id])||void 0===e?void 0:e.reactionType)!==g.value?{sum:0,totalReactionsCount:0}:b.value[t.post.id]}),C=Object(o.computed)(()=>{var e,t,a,o;return null!==(o=null!==(t=null===(e=null===y||void 0===y?void 0:y.value)||void 0===e?void 0:e.max_value)&&void 0!==t?t:null===(a=null===k||void 0===k?void 0:k.value)||void 0===a?void 0:a.max_value)&&void 0!==o?o:n.a}),{setSnackbar:x}=Object(l.b)(),S=Object(o.ref)(null);const P=Object(o.computed)(()=>"dark"===t.colorScheme),j=Object(i.f)(Object(s.a)()).isReactable;return{__sfc:!0,SurfacePostReactionLike:r,SurfacePostReactionVote:d,SurfacePostReactionGrade:f,SurfacePostReactionStar:p,props:t,createReaction:R,deleteReaction:m,updateReaction:v,startEditingReaction:h,accumulatedReactionsByWishId:b,originalReactionData:k,currentReactionData:y,reactionType:g,accumulatedReaction:O,maxGrade:C,setSnackbar:x,rootElement:S,create:function(e){var a;null!=S.value&&((null===(a=S.value.$el.closest(".surface-post"))||void 0===a?void 0:a.classList.contains("noclick"))||R({postId:t.post.id,value:e}))},update:function(e){var a;null!=S.value&&((null===(a=S.value.$el.closest(".surface-post"))||void 0===a?void 0:a.classList.contains("noclick"))||v({postId:t.post.id,value:e}))},edit:function(){var e,a,o,c,n;if(null==S.value)return;if(null===(e=S.value.$el.closest(".surface-post"))||void 0===e?void 0:e.classList.contains("noclick"))return;const{left:i,top:l,width:s}=(null!==(c=null===(o=null===(a=S.value)||void 0===a?void 0:a.$el)||void 0===o?void 0:o.parentElement)&&void 0!==c?c:null===(n=S.value)||void 0===n?void 0:n.$el).getBoundingClientRect();h({postId:t.post.id,dropdownLeft:i,dropdownTop:l,dropdownWidth:s})},deleteExisting:function(){var e;null!=S.value&&((null===(e=S.value.$el.closest(".surface-post"))||void 0===e?void 0:e.classList.contains("noclick"))||m({postId:t.post.id}))},showReactionOffNotice:function(){const e=Object(c.b)("Reactions have been disabled. Changes are not allowed.");x({message:e,notificationType:l.a.error})},isPadletColorSchemeDark:P,canReact:j}}}),d=a(3),f=Object(d.a)(r,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return"like"===a.reactionType?t(a.SurfacePostReactionLike,{key:"reaction-like",ref:"rootElement",attrs:{"data-cy":"surfacePostReactionLike",sum:a.accumulatedReaction.sum,count:a.accumulatedReaction.totalReactionsCount,"user-reaction":a.accumulatedReaction.userReaction,"is-padlet-color-scheme-dark":a.isPadletColorSchemeDark,"can-react":a.canReact,"usage-context":e.usageContext,"post-cid":e.post.cid},on:{create:a.create,delete:a.deleteExisting,"edit-when-reaction-is-off":a.showReactionOffNotice}}):"vote"===a.reactionType?t(a.SurfacePostReactionVote,{key:"reaction-vote",ref:"rootElement",attrs:{"data-cy":"surfacePostReactionVote",sum:a.accumulatedReaction.sum,count:a.accumulatedReaction.totalReactionsCount,"user-reaction":a.accumulatedReaction.userReaction,"is-padlet-color-scheme-dark":a.isPadletColorSchemeDark,"can-react":a.canReact,"usage-context":e.usageContext,"post-cid":e.post.cid},on:{create:a.create,update:a.update,delete:a.deleteExisting,"edit-when-reaction-is-off":a.showReactionOffNotice}}):"grade"===a.reactionType?t(a.SurfacePostReactionGrade,{key:"reaction-grade",ref:"rootElement",attrs:{"data-cy":"surfacePostReactionGrade",sum:a.accumulatedReaction.sum,count:a.accumulatedReaction.totalReactionsCount,"user-reaction":a.accumulatedReaction.userReaction,"max-grade":a.maxGrade,"is-padlet-color-scheme-dark":a.isPadletColorSchemeDark,"can-react":a.canReact,"usage-context":e.usageContext,"post-cid":e.post.cid},on:{edit:a.edit,"edit-when-reaction-is-off":a.showReactionOffNotice}}):"star"===a.reactionType?t(a.SurfacePostReactionStar,{key:"reaction-star",ref:"rootElement",attrs:{"data-cy":"surfacePostReactionStar",sum:a.accumulatedReaction.sum,count:a.accumulatedReaction.totalReactionsCount,"user-reaction":a.accumulatedReaction.userReaction,"max-grade":a.maxGrade,"is-padlet-color-scheme-dark":a.isPadletColorSchemeDark,"can-react":a.canReact,"usage-context":e.usageContext,"post-cid":e.post.cid},on:{edit:a.edit,"edit-when-reaction-is-off":a.showReactionOffNotice}}):t("div")}),[],!1,null,null,null);t.default=f.exports}}]);
//# sourceMappingURL=314-d70bb035c39b08ae69eb.chunk.js.map